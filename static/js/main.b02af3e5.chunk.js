(this.webpackJsonptwistedideas=this.webpackJsonptwistedideas||[]).push([[0],{14:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(9),o=r.n(c),s=(r(14),r(2)),i=r(0),u=function(e){var t=e.children,r=e.onClick,n=function(e){e.preventDefault(),r()};return"td"===e.type?Object(i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:Object(i.jsx)("a",{className:"h-10 px-5 text-gray-700 transition-colors duration-150 border border-gray-500 rounded-lg focus:shadow-outline hover:bg-graygray-500 hover:text-graygray-100",href:"/",onClick:n,children:t})}):Object(i.jsx)("th",{className:"px-6 py-2 text-xs text-gray-500",children:Object(i.jsx)("a",{className:"h-10 px-5 text-gray-700 transition-colors duration-150 border border-gray-500 rounded-lg focus:shadow-outline hover:bg-graygray-500 hover:text-graygray-100",href:"/",onClick:n,children:t})})},l=Object(n.createContext)([null,function(){return null}]),d=function(e){var t=e.children,r=Object(n.useState)(null),a=Object(s.a)(r,2),c=a[0],o=a[1];return Object(i.jsx)(l.Provider,{value:[c,o],children:t})},j=function(e){var t=Object(n.useContext)(l),r=Object(s.a)(t,2),a=r[0],c=r[1];Object(n.useEffect)((function(){var t=new URLSearchParams(window.location.search);c(t.get(e))}),[e,c]);return[a,function(t){var r=new URLSearchParams(window.location.search);r.set(e,t),c(t);var n=window.location.origin+window.location.pathname+"?"+r.toString();window.history.pushState({path:n},"",n)}]},b=function(e){return e instanceof Date?e.getFullYear():new Date(e).getFullYear()},x=function(e){var t=e.id,r=e.firstName,n=e.lastName,a=e.year,c=j("year"),o=Object(s.a)(c,2)[1];return Object(i.jsxs)("tr",{className:"whitespace-nowrap",children:[Object(i.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:t}),Object(i.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-500",children:[r," ",n]}),Object(i.jsx)(u,{type:"td",onClick:function(){o(b(a).toString())},children:b(a)})]})},h=r(3),f=r.n(h),m=r(6),O=function(){var e=Object(m.a)(f.a.mark((function e(t,r,n){var a,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null!==(a="https://murmuring-ocean-71889.herokuapp.com")?a:"",u=t,c="".concat(i,"/").concat(u.replace(/^https?:\/\//i,"")),e.prev=1,e.next=4,fetch(c);case 4:return o=e.sent,e.next=7,o.json();case 7:s=e.sent,r(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n();case 14:case"end":return e.stop()}var i,u}),e,null,[[1,11]])})));return function(t,r,n){return e.apply(this,arguments)}}(),p=function(e){var t=Object(n.useState)(null),r=Object(s.a)(t,2),a=r[0],c=r[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1],d=Object(n.useState)(!1),j=Object(s.a)(d,2),b=j[0],x=j[1];return[{data:a,loading:u,error:b},Object(n.useCallback)(Object(m.a)(f.a.mark((function t(){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(null),x(!1),l(!0),t.prev=1,t.next=4,fetch(e);case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,c(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),O(e,(function(e){return c(e)}),(function(){return x(!0)}));case 14:return t.prev=14,l(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))),[e])]},y=r(8),g=function(e){var t=Object(n.useState)(e),r=Object(s.a)(t,2),a=r[0],c=r[1],o=Object(n.useRef)("ASC"),i=Object(n.useCallback)((function(t){if(t||c(e),"ASC"!==o.current){o.current="ASC";var r=e.sort((function(e,r){return"number"===typeof e[t]?r[t]-e[t]:null===(n=r[t])||void 0===n?void 0:n.localeCompare(e[t]);var n}));c(Object(y.a)(r))}else{o.current="DESC";var n=e.sort((function(e,r){return"number"===typeof e[t]?e[t]-r[t]:null===(n=e[t])||void 0===n?void 0:n.localeCompare(r[t]);var n}));c(Object(y.a)(n))}}),[e]),u=Object(n.useCallback)((function(e){i(e)}),[i]);return Object(n.useEffect)((function(){c(e)}),[e]),[a,u]};var v=function(){var e,t=p(null!==(e="http://twistedideas.com/mock/users.json")?e:""),r=Object(s.a)(t,2),a=r[0],c=a.data,o=a.loading,l=a.error,d=r[1],h=j("year"),f=Object(s.a)(h,2),m=f[0],O=f[1],y=g(null!==c&&void 0!==c?c:[]),v=Object(s.a)(y,2),w=v[0],C=v[1],k=Object(n.useMemo)((function(){return w.filter((function(e){return!m||b(e.year).toString()===m}))}),[m,w]);return Object(n.useEffect)((function(){d()}),[d]),Object(i.jsxs)("div",{className:"w-screen flex flex-col",children:[o&&Object(i.jsx)("p",{className:"mx-auto mt-40 text-2xl",children:"Loading. Please, wait..."}),l&&Object(i.jsxs)("div",{className:"mx-auto mt-40 flex flex-col",children:[Object(i.jsx)("p",{className:"text-2xl text-red-600",children:"An error occurred. Please, try again."}),Object(i.jsx)("button",{className:"mx-auto mt-5 h-10 px-5 text-gray-700 transition-colors duration-150 border border-gray-500 rounded-lg focus:shadow-outline hover:bg-graygray-500 hover:text-graygray-100",onClick:d,children:"Try again"})]}),m&&c&&Object(i.jsx)("button",{className:"mx-auto mt-5 h-10 px-5 text-gray-700 transition-colors duration-150 border border-gray-500 rounded-lg focus:shadow-outline hover:bg-graygray-500 hover:text-graygray-100",onClick:function(){O("")},children:"Clear year"}),c&&Object(i.jsxs)("table",{className:"w-1/3 mx-auto ".concat(m?"mt-5":"mt-20"),children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{className:"bg-gray-50",children:[Object(i.jsx)(u,{type:"th",onClick:function(){return C("id")},children:"ID"}),Object(i.jsx)(u,{type:"th",onClick:function(){return C("first_name")},children:"Full name"}),Object(i.jsx)(u,{type:"th",onClick:function(){return C("year")},children:"Year"})]})}),Object(i.jsx)("tbody",{className:"bg-white",children:k&&k.map((function(e){var t=e.id,r=e.first_name,n=e.last_name,a=e.year;return Object(i.jsx)(x,{firstName:r,lastName:n,id:t,year:a},"list-item-".concat(t))}))})]})]})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(d,{children:Object(i.jsx)(v,{})})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.b02af3e5.chunk.js.map